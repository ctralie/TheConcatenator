<!doctype html>
<html>
  <head>
    <title>The Concatenator</title>
    <script src="jslibs/jquery-3.5.1.min.js"></script>
    <script src="jslibs/jquery.ajax.arraybuffer.min.js"></script>
    <script src="jslibs/base64-arraybuffer.js"></script>
    <script src="jslibs/gl-matrix-min.js"></script>
    <script src="jslibs/dat.gui.min.js"></script>
    
    <script src="colormaps.js"></script>
    <script src="progressbar.js"></script>

    <script src="wav.js"></script>
    <script src="audio.js"></script>
    <script src="corpus.js"></script>
    <script>
      var Module = {
        onRuntimeInitialized: function() {
          let win = 2048;
          let quantum = 128;
          let sr = 44100;
          let nChannels = 2;
          let minFreq = 50;
          let maxFreq = 10000;
          let p = 10;
          let pFinal = p;
          let P = 2000;
          let temperature = 100;
          let L = 10;
          let r = 7;
          let pd = 0.99;

          let pf = new Module.ParticleFilter(win, quantum, sr, nChannels, minFreq, maxFreq, p, pFinal, P, pd, temperature, L, r);
          let particles = Module.HEAP32.subarray(pf.particles >> 2);
          for (let i = 0; i < 10; i++) {
            for (let j = 0; j < p; j++) {
              console.log("("+i+","+j+")", particles[i*p+j]);
            }
          }
        }
      }
    </script>
    <script src="particle.js"></script>
  </head>
  <body>
    <h1>The Concatenator ðŸŽµ</h1>
    <span id="pagestatus"><h4>Welcome! Choose some corpus tunes ðŸŽµ to start</h4></span>
    <HR>
    <div id="corpusArea"></div>

    <script src="main.js"></script>

    </body>
</html>
